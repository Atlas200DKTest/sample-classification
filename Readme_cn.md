ä¸­æ–‡|[English](Readme.md)

# åˆ†ç±»ç½‘ç»œåº”ç”¨ï¼ˆC++ï¼‰<a name="ZH-CN_TOPIC_0232337690"></a>

æœ¬Applicationæ”¯æŒè¿è¡Œåœ¨Atlas 200 DKæˆ–è€…AIåŠ é€Ÿäº‘æœåŠ¡å™¨ä¸Šï¼Œå®žçŽ°äº†å¯¹å¸¸è§çš„åˆ†ç±»ç½‘ç»œçš„æŽ¨ç†åŠŸèƒ½å¹¶è¾“å‡ºå‰nä¸ªæŽ¨ç†ç»“æžœã€‚

å½“å‰åˆ†æ”¯ä¸­çš„åº”ç”¨é€‚é…**1.32.0.0åŠä»¥ä¸Š**ç‰ˆæœ¬çš„[DDK&RunTime](https://ascend.huawei.com/resources)ã€‚

## å‰ææ¡ä»¶<a name="zh-cn_topic_0228461902_section137245294533"></a>

éƒ¨ç½²æ­¤Sampleå‰ï¼Œéœ€è¦å‡†å¤‡å¥½ä»¥ä¸‹çŽ¯å¢ƒï¼š

-   å·²å®ŒæˆMind Studioçš„å®‰è£…ã€‚
-   å·²å®ŒæˆAtlas 200 DKå¼€å‘è€…æ¿ä¸ŽMind Studioçš„è¿žæŽ¥ï¼Œäº¤å‰ç¼–è¯‘å™¨çš„å®‰è£…ï¼ŒSDå¡çš„åˆ¶ä½œåŠåŸºæœ¬ä¿¡æ¯çš„é…ç½®ç­‰ã€‚

## éƒ¨ç½²<a name="zh-cn_topic_0228461902_section412811285117"></a>

å¯ä»¥é€‰æ‹©å¦‚ä¸‹å¿«é€Ÿéƒ¨ç½²æˆ–è€…å¸¸è§„æ–¹æ³•éƒ¨ç½²ï¼ŒäºŒé€‰ä¸€å³å¯ï¼š

1.  å¿«é€Ÿéƒ¨ç½²ï¼Œè¯·å‚è€ƒï¼š  [https://github.com/Atlas200dk/faster-deploy](https://github.com/Atlas200dk/faster-deploy)  ã€‚

    >![](public_sys-resources/icon-note.gif) **è¯´æ˜Žï¼š**   
    >-   è¯¥å¿«é€Ÿéƒ¨ç½²è„šæœ¬å¯ä»¥å¿«é€Ÿéƒ¨ç½²å¤šä¸ªæ¡ˆä¾‹ï¼Œè¯·é€‰æ‹©classificationæ¡ˆä¾‹éƒ¨ç½²å³å¯ã€‚  
    >-   è¯¥å¿«é€Ÿéƒ¨ç½²è„šæœ¬è‡ªåŠ¨å®Œæˆäº†ä»£ç ä¸‹è½½ã€æ¨¡åž‹è½¬æ¢ã€çŽ¯å¢ƒå˜é‡é…ç½®ç­‰æµç¨‹ï¼Œå¦‚æžœéœ€è¦äº†è§£è¯¦ç»†çš„éƒ¨ç½²è¿‡ç¨‹è¯·é€‰æ‹©å¸¸è§„éƒ¨ç½²æ–¹å¼ã€‚è½¬ **ï¼š[2. å¸¸è§„éƒ¨ç½²](#zh-cn_topic_0228461902_li3208251440)**  

2.  <a name="zh-cn_topic_0228461902_li3208251440"></a>å¸¸è§„éƒ¨ç½²ï¼Œè¯·å‚è€ƒï¼š  [https://github.com/Atlas200dk/sample-README/tree/master/sample-classification](https://github.com/Atlas200dk/sample-README/tree/master/sample-classification)  ã€‚

    >![](public_sys-resources/icon-note.gif) **è¯´æ˜Žï¼š**   
    >-   è¯¥éƒ¨ç½²æ–¹å¼ï¼Œéœ€è¦æ‰‹åŠ¨å®Œæˆä»£ç ä¸‹è½½ã€æ¨¡åž‹è½¬æ¢ã€çŽ¯å¢ƒå˜é‡é…ç½®ç­‰è¿‡ç¨‹ã€‚å®ŒæˆåŽï¼Œä¼šå¯¹å…¶ä¸­çš„è¿‡ç¨‹æ›´åŠ äº†è§£ã€‚  


## ç¼–è¯‘<a name="zh-cn_topic_0228461902_section18931344873"></a>

1.  æ‰“å¼€å¯¹åº”çš„å·¥ç¨‹ã€‚

    ä»¥Mind Studioå®‰è£…ç”¨æˆ·åœ¨å‘½ä»¤è¡Œè¿›å…¥å®‰è£…åŒ…è§£åŽ‹åŽçš„â€œMindStudio-ubuntu/binâ€ç›®å½•ï¼Œå¦‚ï¼š$HOME/MindStudio-ubuntu/binã€‚æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å¯åŠ¨Mind Studioã€‚

    **./MindStudio.sh**

    å¯åŠ¨æˆåŠŸåŽï¼Œæ‰“å¼€**sample-classification**å·¥ç¨‹ï¼Œå¦‚[å›¾ æ‰“å¼€classificationå·¥ç¨‹](#zh-cn_topic_0228461902_zh-cn_topic_0203223265_fig11106241192810)æ‰€ç¤ºã€‚

    **å›¾ 1**  æ‰“å¼€classificationå·¥ç¨‹<a name="zh-cn_topic_0228461902_zh-cn_topic_0203223265_fig11106241192810"></a>  
    ![](figures/æ‰“å¼€classificationå·¥ç¨‹.png "æ‰“å¼€classificationå·¥ç¨‹")

2.  åœ¨**src/param\_configure.conf**æ–‡ä»¶ä¸­é…ç½®ç›¸å…³å·¥ç¨‹ä¿¡æ¯ã€‚

    **å›¾ 2**  é…ç½®æ–‡ä»¶è·¯å¾„<a name="zh-cn_topic_0228461902_fig0391184062214"></a>  
    ![](figures/é…ç½®æ–‡ä»¶è·¯å¾„.png "é…ç½®æ–‡ä»¶è·¯å¾„")

    è¯¥é…ç½®æ–‡ä»¶é»˜è®¤é…ç½®å†…å®¹å¦‚ä¸‹ï¼š

    ```
    remote_host=192.168.1.2
    model_name=alexnet.om
    ```

    -   remote\_hostï¼šAtlas 200 DKå¼€å‘è€…æ¿çš„IPåœ°å€ã€‚
    -   model\_name : ç¦»çº¿æ¨¡åž‹åç§°ã€‚
    -   å¦‚æžœå‚æ•°å’Œé»˜è®¤é…ç½®ï¼Œå¯ä»¥ä¿®æ”¹ä¸ºé»˜è®¤é…ç½®æˆ–è€…æ ¹æ®è‡ªå·±çš„å®žé™…ipä¸Žæ¨¡åž‹åç§°è¿›è¡Œä¿®æ”¹ã€‚

    >![](public_sys-resources/icon-note.gif) **è¯´æ˜Žï¼š**   
    >-   å‚æ•°å¿…é¡»å…¨éƒ¨å¡«å†™ï¼Œå¦åˆ™æ— æ³•é€šè¿‡buildã€‚  
    >-   æ³¨æ„å‚æ•°å¡«å†™æ—¶ä¸éœ€è¦ä½¿ç”¨â€œâ€ç¬¦å·ã€‚  
    >-   é…ç½®æ–‡ä»¶ä¸­åªèƒ½å¡«å…¥å•ä¸ªæ¨¡åž‹åç§°ï¼Œå¡«å…¥çš„æ¨¡åž‹ä¸ºalexnetï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨å¸¸è§„éƒ¨ç½²åˆ—ä¸¾çš„å…¶å®ƒæ¨¡åž‹æŒ‰ç…§æ–‡æ¡£æ­¥éª¤è¿›è¡Œæ›¿æ¢è¿è¡Œã€‚  
    >-   å½“å‰å·²ç»æŒ‰ç…§é…ç½®ç¤ºä¾‹é…ç½®é»˜è®¤å€¼ï¼Œè¯·æŒ‰ç…§é…ç½®æƒ…å†µè‡ªè¡Œä¿®æ”¹ã€‚  

3.  æ‰§è¡Œdeployè„šæœ¬ï¼Œ è¿›è¡Œé…ç½®å‚æ•°è°ƒæ•´åŠç¬¬ä¸‰æ–¹åº“ä¸‹è½½ç¼–è¯‘ æ‰“å¼€Mind Studioå·¥å…·çš„Terminalï¼Œæ­¤æ—¶é»˜è®¤åœ¨ä»£ç ä¸»ç›®å½•ä¸‹ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤åœ¨åŽå°æŒ‡æ‰§è¡Œdeployè„šæœ¬ï¼Œè¿›è¡ŒçŽ¯å¢ƒéƒ¨ç½²ã€‚å¦‚[å›¾ æ‰§è¡Œdeployè„šæœ¬](#zh-cn_topic_0228461902_zh-cn_topic_0203223265_fig478266192619)æ‰€ç¤ºã€‚

    **å›¾ 3**  æ‰§è¡Œdeployè„šæœ¬<a name="zh-cn_topic_0228461902_zh-cn_topic_0203223265_fig478266192619"></a>  
    ![](figures/æ‰§è¡Œdeployè„šæœ¬.png "æ‰§è¡Œdeployè„šæœ¬")

    >![](public_sys-resources/icon-note.gif) **è¯´æ˜Žï¼š**   
    >-   é¦–æ¬¡deployæ—¶ï¼Œæ²¡æœ‰éƒ¨ç½²ç¬¬ä¸‰æ–¹åº“æ—¶ä¼šè‡ªåŠ¨ä¸‹è½½å¹¶ç¼–è¯‘ï¼Œè€—æ—¶å¯èƒ½æ¯”è¾ƒä¹…ï¼Œè¯·è€å¿ƒç­‰å¾…ã€‚åŽç»­å†é‡æ–°ç¼–è¯‘æ—¶ï¼Œä¸ä¼šé‡å¤ä¸‹è½½ç¼–è¯‘ï¼Œéƒ¨ç½²å¦‚ä¸Šå›¾æ‰€ç¤ºã€‚  
    >-   deployæ—¶ï¼Œéœ€è¦é€‰æ‹©ä¸Žå¼€å‘æ¿é€šä¿¡çš„ä¸»æœºä¾§ipï¼Œä¸€èˆ¬ä¸ºè™šæ‹Ÿç½‘å¡é…ç½®çš„ipã€‚å¦‚æžœæ­¤ipå’Œå¼€å‘æ¿ipå±žäºŽåŒç½‘æ®µï¼Œåˆ™ä¼šè‡ªåŠ¨é€‰æ‹©å¹¶éƒ¨ç½²ã€‚å¦‚æžœéžåŒç½‘æ®µï¼Œåˆ™éœ€è¦æ‰‹åŠ¨è¾“å…¥ä¸Žå¼€å‘æ¿é€šä¿¡çš„ä¸»æœºä¾§ipæ‰èƒ½å®Œæˆdeployã€‚  

4.  å¼€å§‹ç¼–è¯‘ï¼Œæ‰“å¼€Mind Studioå·¥å…·ï¼Œåœ¨å·¥å…·æ ä¸­ç‚¹å‡»**Build \> Build \> Build-Configuration**ã€‚å¦‚[å›¾ ç¼–è¯‘æ“ä½œåŠç”Ÿæˆæ–‡ä»¶](#zh-cn_topic_0228461902_zh-cn_topic_0203223265_fig1741464713019)æ‰€ç¤ºï¼Œä¼šåœ¨ç›®å½•ä¸‹ç”Ÿæˆbuildå’Œrunæ–‡ä»¶å¤¹ã€‚

    **å›¾ 4**  ç¼–è¯‘æ“ä½œåŠç”Ÿæˆæ–‡ä»¶<a name="zh-cn_topic_0228461902_zh-cn_topic_0203223265_fig1741464713019"></a>  
    ![](figures/ç¼–è¯‘æ“ä½œåŠç”Ÿæˆæ–‡ä»¶.png "ç¼–è¯‘æ“ä½œåŠç”Ÿæˆæ–‡ä»¶")

    >![](public_sys-resources/icon-notice.gif) **é¡»çŸ¥ï¼š**   
    >é¦–æ¬¡ç¼–è¯‘å·¥ç¨‹æ—¶ï¼Œ**Build \> Build**ä¸ºç°è‰²ä¸å¯ç‚¹å‡»çŠ¶æ€ã€‚éœ€è¦ç‚¹å‡»**Build \> Edit Build Configuration**ï¼Œé…ç½®ç¼–è¯‘å‚æ•°åŽå†è¿›è¡Œç¼–è¯‘ã€‚  

5.  å°†éœ€è¦æŽ¨ç†çš„å›¾ç‰‡ä¸Šä¼ è‡³Hostä¾§ä»»ä¸€å±žç»„ä¸ºHwHiAiUserç”¨æˆ·çš„ç›®å½•ã€‚

    å›¾ç‰‡è¦æ±‚å¦‚ä¸‹ï¼š

    -   æ ¼å¼ï¼šjpgã€pngã€bmpã€‚
    -   è¾“å…¥å›¾ç‰‡å®½åº¦ï¼š16px\~4096pxä¹‹é—´çš„æ•´æ•°ã€‚
    -   è¾“å…¥å›¾ç‰‡é«˜åº¦ï¼š16px\~4096pxä¹‹é—´çš„æ•´æ•°ã€‚


## è¿è¡Œ<a name="zh-cn_topic_0228461902_section372782554919"></a>

1.  åœ¨Mind Studioå·¥å…·çš„å·¥å…·æ ä¸­æ‰¾åˆ°RunæŒ‰é’®ï¼Œå•å‡»  **Run \> Run 'sample-classification'**ï¼Œå¦‚[å›¾ ç¨‹åºå·²æ‰§è¡Œç¤ºæ„å›¾](#zh-cn_topic_0228461902_zh-cn_topic_0203223265_fig93931954162719)æ‰€ç¤ºï¼Œå¯æ‰§è¡Œç¨‹åºå·²ç»åœ¨å¼€å‘è€…æ¿æ‰§è¡Œã€‚

    **å›¾ 5**  ç¨‹åºå·²æ‰§è¡Œç¤ºæ„å›¾<a name="zh-cn_topic_0228461902_zh-cn_topic_0203223265_fig93931954162719"></a>  
    ![](figures/ç¨‹åºå·²æ‰§è¡Œç¤ºæ„å›¾.png "ç¨‹åºå·²æ‰§è¡Œç¤ºæ„å›¾")

    ä»¥ä¸ŠæŠ¥é”™ä¿¡æ¯è¯·å¿½ç•¥ï¼Œå› ä¸ºMind Studioæ— æ³•ä¸ºå¯æ‰§è¡Œç¨‹åºä¼ å‚ï¼Œä¸Šè¿°æ­¥éª¤æ˜¯å°†å¯æ‰§è¡Œç¨‹åºä¸Žä¾èµ–çš„åº“æ–‡ä»¶éƒ¨ç½²åˆ°å¼€å‘è€…æ¿ï¼Œæ­¤æ­¥éª¤éœ€è¦sshç™»å½•åˆ°å¼€å‘è€…æ¿è‡³ç›¸åº”çš„ç›®å½•æ–‡ä»¶ä¸‹æ‰‹åŠ¨æ‰§è¡Œï¼Œå…·ä½“è¯·å‚è€ƒä»¥ä¸‹æ­¥éª¤ã€‚

2.  åœ¨Mind Studioæ‰€åœ¨UbuntuæœåŠ¡å™¨ä¸­ï¼Œä»¥HwHiAiUserç”¨æˆ·SSHç™»å½•åˆ°Hostä¾§ã€‚

    **ssh HwHiAiUser@**_host\_ip_

    å¯¹äºŽAtlas 200 DKï¼Œhost\_ipé»˜è®¤ä¸º192.168.1.2ï¼ˆUSBè¿žæŽ¥ï¼‰æˆ–è€…192.168.0.2ï¼ˆNICè¿žæŽ¥ï¼‰ï¼Œé»˜è®¤å¯†ç ä¸ºMind@123ã€‚

3.  è¿›å…¥é€šç”¨åˆ†ç±»ç½‘ç»œåº”ç”¨çš„å¯æ‰§è¡Œæ–‡ä»¶æ‰€åœ¨è·¯å¾„ã€‚

    **cd \~/HIAI\_PROJECTS/workspace\_mind\_studio/sample-classification\_XXXXX/out**

    >![](public_sys-resources/icon-note.gif) **è¯´æ˜Žï¼š**   
    >-   æ­¤è·¯å¾„ä¸­sample-classification\_XXXXXçš„XXXXXæ˜¯ä¸€ä¸²å­—æ¯å’Œæ•°å­—çš„éšæœºç»„åˆï¼Œæ¯æ¬¡é‡æ–°ç¼–è¯‘è¿è¡Œæ—¶éƒ½ä¼šéšæœºç”Ÿæˆã€‚  

4.  æ‰§è¡Œåº”ç”¨ç¨‹åºã€‚

    æ‰§è¡Œ**run\_classification.py**è„šæœ¬ä¼šå°†æŽ¨ç†ç»“æžœåœ¨æ‰§è¡Œç»ˆç«¯ç›´æŽ¥æ‰“å°æ˜¾ç¤ºã€‚

    å‘½ä»¤ç¤ºä¾‹å¦‚ä¸‹æ‰€ç¤ºï¼š

    **python3 run\_classification.py -w  _227_   -h  _227_   -i** **_./example.jpg_  -n  _10_**

    -   -w/model\_widthï¼šæ¨¡åž‹çš„è¾“å…¥å›¾ç‰‡å®½åº¦ï¼Œä¸º16\~4096ä¹‹é—´çš„æ•´æ•°ï¼Œæ ·ä¾‹æ¨¡åž‹é»˜è®¤ä¸º227ã€‚
    -   -h/model\_heightï¼šæ¨¡åž‹çš„è¾“å…¥å›¾ç‰‡é«˜åº¦ï¼Œä¸º16\~4096ä¹‹é—´çš„æ•´æ•°ï¼Œæ ·ä¾‹æ¨¡åž‹é»˜è®¤ä¸º227ã€‚
    -   -i/input\_pathï¼šè¾“å…¥å›¾ç‰‡çš„è·¯å¾„ï¼Œå¯ä»¥æ˜¯ç›®å½•ï¼Œè¡¨ç¤ºå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰å›¾ç‰‡éƒ½ä½œä¸ºè¾“å…¥ï¼ˆå¯ä»¥æŒ‡å®šå¤šä¸ªè¾“å…¥ï¼‰ã€‚
    -   -n/top\_nï¼šè¾“å‡ºå‰nä¸ªæŽ¨ç†ç»“æžœã€‚

    å…¶ä»–è¯¦ç»†å‚æ•°è¯·æ‰§è¡Œ**python3 run\_classification.py --help**å‘½ä»¤å‚è§å¸®åŠ©ä¿¡æ¯ã€‚


